<h1> 看板设计 </h1>

---

**我的看板**为当前用户创建的看板，普通看板分类通过**分类管理**维护，保存看板时选择对应分类, 看板分类的添加需要有管理权限，建议超级管理员统一维护

## 网格布局

* 网格看板设计采用简单Row+Column布局模式，每行总长度为12，每列对应一个图表，行高度可以调节单位为像素，列高度继承行高；
* 交叉表默认行高要比普通图表高一些，使用时建议把表格单独放置一行，如果表格里面数据行过少，再自己调整合适的行高
* 演示动画和最新版本会有一些微小的差别
![board design](https://raw.githubusercontent.com/yzhang921/CloudResource/gif/gif/cboard/board_degin.gif)

## 时间轴布局

* 时间轴布局适合总分结构、有强业务先后步骤的看板设计
* 看板结构组成
* **看板参数行（Param Row）**：有且仅有一行，而且只能在看板最顶端，参数栏为空的时候展示页面不会显示参数行
* **主节点（Main Node）**
* 一个看板下面可以有多个主节点
* 主节点可以有节点名称，在左侧时间线上可以看到，节点名称尽可能精简，太长会导致显示溢出
* 主节点对应看板：需要填写主**标题（Main Title）**
* **子节点（Sub Node）**
* 一个主节点下面可以有0到多个子节点，每个子节点都可以视为一个独立的看板
* 子节点收起状态数据不会加载

### 节点展开状态

![](../../../assets/TimeLineBoard.png)

### 节点收起状态

![](../../../assets/timeline_collapse.png)

## 看板参数

v0.2新增面板参数功能，利用面板参数可以在Dashboard展示页面支持用户数据交互；面板参数实质是关联在当前看板包含图表的数据集或者查询的列之上

v0.3.2新增滑动条交互的参数![](../../../assets/config_param_slider.png)

* 我们在使用Elasticsearch展示实时数据时，发现需要使用到时间戳作为查询参数，而时间戳是连续变量，而且值内容相对可以预判，没有必要从数据源查询获取，而且select的交互方式不太直观，这促使我们加入了滑动条参数交互
* 滑动条的序列值是自动生成的**数字**，数字能够用作时间戳格式化为日期字符串
* 我们知道自动生成一个序列需要知道序列的
* **最小值\(Min\)**、**最大值\(Max\)**：内置时间戳变量_now\(N,'M/d/h'\)_，当前时间偏移N个时间单位\(M月/d天/h小时\)对应的时间戳
* **步长\(Step\)**：内置步长时间戳变量_interval\(N,'d/h/m/s'\)_，d天/h小时/m分钟/h小时
* 滑动调要设置区间\(interval\)
* **初始化范围（Default Range）**
* **最大允许范围（Max Range）**
* 显示在页面上可以控制滑动条
* **宽度\(Width最大12\)**、为了让时间戳有更好的可读性可以指定**显示格式化\(View Format\)**
* 时间戳交互是不用设置**值格式化\(Value Format\)**；用于日期类型交互时需要设置值格式化

### 下拉ParamType\(交互类型\)选择Slider

![](../../../assets/slider_param.png)

### 利用面板参数实现不同数据集之前的联动

一个参数可以关联到多个Cube/查询的相同或者不同列之上，面板上选择设置参数值的操作类型\(&gt;, &lt;, &gt;=, &lt;=, =, ≠, 区间范围\)之后，该值会以过滤形式过滤所有关联cube的值。如：下图新建一个名称为**year**的参数，同时关联到了三个cube的不同名称的列之上。

### 添加面板参数

* **注意面板参数只能用户维度列上面，不能用于值列之上**
![case4-addboardparam](https://cloud.githubusercontent.com/assets/6037522/21478022/74216f2e-cb82-11e6-9612-390a2f93184c.gif)

### 使用面板参数

![case4-useparam](https://cloud.githubusercontent.com/assets/6037522/21478021/73f81fe8-cb82-11e6-95ea-d98b43a4abf2.gif)

## 参数模板

![](../../../assets/board_param_template.png)

当看板参数过多的，或者参数成员组成比较复杂的时候，可以把当前参数保存为模板。第二次登陆，或者会话过期之后可以快速加载参数
看板参数绑定和用户绑定，每个用户可以保存自己特定的参数模板


